{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dustinbroussard/Desktop/FullStack/course_work/project_09/Strangers-Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/dustinbroussard/Desktop/FullStack/course_work/project_09/Strangers-Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/dustinbroussard/Desktop/FullStack/course_work/project_09/Strangers-Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./Profile.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var baseURL=\"https://strangers-things.herokuapp.com/api/2206-ftb-et-web-ft-b\";var Profile=function Profile(_ref){var userToken=_ref.userToken,userLogin=_ref.userLogin,setUserToken=_ref.setUserToken;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allMessages=_useState2[0],setAllMessages=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userPosts=_useState4[0],setUserPosts=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),currentUser=_useState6[0],setCurrentUser=_useState6[1];// let {_id}= myPosts\nuseEffect(function(){var fetchMe=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(userToken);_context.prev=1;_context.next=4;return fetch(\"\".concat(baseURL,\"/users/me\"),{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userToken)}});case 4:response=_context.sent;_context.next=7;return response.json();case 7:results=_context.sent;console.log(results);setAllMessages(results.data.messages);setUserPosts(results.data.posts);setCurrentUser(results.data.username);_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,14]]);}));return function fetchMe(){return _ref2.apply(this,arguments);};}();fetchMe();},[userPosts.active]);var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(postID){var results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postID),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userToken)}}).then(function(response){return response.json();}).then(function(result){console.log(result);alert(\"\".concat(userPosts.title,\" had been deleted\"));console.log();}).catch(console.error);case 2:results=_context2.sent;case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function deletePost(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[!userToken?/*#__PURE__*/_jsx(\"h2\",{className:\"please-login-statement\",children:\"Please Login or Create an account to start looking at Strangers Things\"}):null,currentUser?/*#__PURE__*/_jsxs(\"h2\",{className:\"profile-statement\",children:[\"Hello \",currentUser,\", let's look at strangers things!!\",\" \"]}):null,/*#__PURE__*/_jsx(\"h1\",{children:\"My Messages\"}),allMessages.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"You currently do not have any messages\"}):allMessages.map(function(myMessages,idx){return/*#__PURE__*/_jsxs(\"div\",{className:\"my-messages\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Post: \",myMessages.post.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Sent From: \",myMessages.fromUser.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Message: \",myMessages.content]})]},idx);}),/*#__PURE__*/_jsx(\"h1\",{children:\"My Posts\"}),userPosts.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"You currently do not have any posts\"}):userPosts.map(function(myPosts,idx){return/*#__PURE__*/_jsxs(\"div\",{className:\"my-posts\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Item for sale: \"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:myPosts.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Item description: \",myPosts.description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Item Price: $\",myPosts.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-posts-buttons\",children:[myPosts.active?/*#__PURE__*/_jsx(\"p\",{className:\"still-active\",children:\"This Post is still active\"}):/*#__PURE__*/_jsx(\"p\",{className:\"not-active\",children:\"This Post is no longer active\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Edit Post\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deletePost(myPosts._id);},children:\"Delete Post\"})]})]},idx);})]});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","axios","baseURL","Profile","userToken","userLogin","setUserToken","allMessages","setAllMessages","userPosts","setUserPosts","currentUser","setCurrentUser","fetchMe","console","log","fetch","headers","Authorization","response","json","results","data","messages","posts","username","active","deletePost","postID","method","then","result","alert","title","catch","error","length","map","myMessages","idx","post","fromUser","content","myPosts","description","price","_id"],"sources":["/Users/dustinbroussard/Desktop/FullStack/course_work/project_09/Strangers-Things/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useState,  } from \"react\";\nimport axios from \"axios\";\nimport \"./Profile.css\";\n\nconst baseURL =\n  \"https://strangers-things.herokuapp.com/api/2206-ftb-et-web-ft-b\";\n\nconst Profile = ({ userToken, userLogin, setUserToken }) => {\n  const [allMessages, setAllMessages] = useState([]);\n  const [userPosts, setUserPosts] = useState([]);\n  const [currentUser, setCurrentUser] = useState(\"\");\n\n  // let {_id}= myPosts\n\n  useEffect(() => {\n    const fetchMe = async () => {\n      console.log(userToken);\n\n      try {\n        const response = await fetch(`${baseURL}/users/me`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${userToken}`,\n          },\n        });\n        let results = await response.json();\n        console.log(results);\n        setAllMessages(results.data.messages);\n        setUserPosts(results.data.posts);\n        setCurrentUser(results.data.username);\n      } catch (error) {}\n    };\n    fetchMe();\n  }, [userPosts.active]);\n\n  const deletePost = async (postID) => {\n    const results = await fetch(`${baseURL}/posts/${postID}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userToken}`,\n      },\n    })\n      .then((response) => response.json())\n      .then((result) => {\n        console.log(result);\n        alert(`${userPosts.title} had been deleted`);\n        console.log();\n      })\n      .catch(console.error);\n  };\n\n  return (\n    <>\n      {!userToken ? <h2 className='please-login-statement'>Please Login or Create an account to start looking at Strangers Things</h2> : null }\n      {currentUser ? (\n        <h2 className=\"profile-statement\">\n          Hello {currentUser}, let's look at strangers things!!{\" \"}\n        </h2>\n      ) : null}\n\n      <h1>My Messages</h1>\n\n      {allMessages.length === 0 ? (\n        <h3>You currently do not have any messages</h3>\n      ) : (\n        allMessages.map((myMessages, idx) => {\n          return (\n            <div key={idx} className=\"my-messages\">\n              <p>Post: {myMessages.post.title}</p>\n              <p>Sent From: {myMessages.fromUser.username}</p>\n              <p>Message: {myMessages.content}</p>\n            </div>\n          );\n        })\n      )}\n\n      <h1>My Posts</h1>\n      {userPosts.length === 0 ? (\n        <h3>You currently do not have any posts</h3>\n      ) : (\n        userPosts.map((myPosts, idx) => {\n          \n          return (\n            <div key={idx}  className=\"my-posts\">\n              <span>Item for sale: </span> <span>{myPosts.title}</span>\n              <p>Item description: {myPosts.description}</p>\n              <p>Item Price: ${myPosts.price}</p>\n              <div className=\"my-posts-buttons\">\n                {myPosts.active ? <p className='still-active'>This Post is still active</p>: <p className='not-active'>This Post is no longer active</p>}\n                <button>Edit Post</button>\n                <button onClick={()=>deletePost(myPosts._id)}>Delete Post</button>\n              </div>\n            </div>\n          );\n        })\n      )}\n    </>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}