{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dustinbroussard/Desktop/FullStack/course_work/project_09/Strangers-Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/dustinbroussard/Desktop/FullStack/course_work/project_09/Strangers-Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState}from\"react\";import axios from\"axios\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var baseURL=\"https://strangers-things.herokuapp.com/api/2206-ftb-et-web-ft-b\";var Login=function Login(_ref){var userToken=_ref.userToken,setUserToken=_ref.setUserToken,userLogin=_ref.userLogin,userPassword=_ref.userPassword,setUserLogin=_ref.setUserLogin,setUserPassword=_ref.setUserPassword;var logInUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();fetch(\"\".concat(baseURL,\"/users/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{username:userLogin,password:userPassword}})}).then(function(response){return response.json();}).then(function(result){window.localStorage.setItem(\"token\",result.data.token);setUserToken(localStorage.getItem(\"token\"));}).catch(console.error);case 2:case\"end\":return _context.stop();}}},_callee);}));return function logInUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"main\",{className:\"login-main\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"main-page-header\",children:\"Please login to view posts and see all of the great items listed on STRANGERS THINGS\"}),userToken?/*#__PURE__*/_jsxs(\"h1\",{className:\"user-statement\",children:[\"You are currently logged in as \",userLogin]}):/*#__PURE__*/_jsx(\"div\",{className:\"login-field\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login_form\",onSubmit:logInUser,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,onChange:function onChange(event){return setUserLogin(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,onChange:function onChange(event){return setUserPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Log In\"})]})})]});};export default Login;","map":{"version":3,"names":["React","useState","axios","baseURL","Login","userToken","setUserToken","userLogin","userPassword","setUserLogin","setUserPassword","logInUser","event","preventDefault","fetch","method","headers","body","JSON","stringify","user","username","password","then","response","json","result","window","localStorage","setItem","data","token","getItem","catch","console","error","target","value"],"sources":["/Users/dustinbroussard/Desktop/FullStack/course_work/project_09/Strangers-Things/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Login.css\";\n\nconst baseURL =\n  \"https://strangers-things.herokuapp.com/api/2206-ftb-et-web-ft-b\";\n\nconst Login = ({ userToken, setUserToken, userLogin, userPassword, setUserLogin, setUserPassword}) => {\n  \n\n  \n\n  const logInUser = async (event) => {\n    event.preventDefault();\n    fetch(`${baseURL}/users/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          username: userLogin,\n          password: userPassword,\n        },\n      }),\n    })\n      .then((response) => response.json())\n      .then((result) => {\n        window.localStorage.setItem(\"token\", result.data.token);\n        setUserToken(localStorage.getItem(\"token\"));\n      })\n      .catch(console.error);\n  };\n\n  return (\n    <main className=\"login-main\">\n      <h1 className=\"main-page-header\">\n        Please login to view posts and see all of the great items listed on\n        STRANGERS THINGS\n      </h1>\n\n      {userToken ? <h1 className='user-statement'>You are currently logged in as {userLogin}</h1> :\n      <div className=\"login-field\">\n        <form className='login_form' onSubmit={logInUser}>\n          <label>Username</label>\n          <br></br>\n          <input\n            type=\"text\"\n            required\n            onChange={(event) => setUserLogin(event.target.value)}\n          ></input>\n          <br></br>\n          <label>Password</label>\n          <br></br>\n          <input\n            type=\"password\"\n            required\n            onChange={(event) => setUserPassword(event.target.value)}\n          ></input>\n          <br></br>\n          <button type=\"submit\">Log In</button>\n        </form>\n      </div>\n      \n    }\n    </main>\n  );\n};\n\nexport default Login;\n"],"mappings":"4VAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAO,aAAP,C,wFAEA,GAAMC,QAAO,CACX,iEADF,CAGA,GAAMC,MAAK,CAAG,QAARA,MAAQ,MAAwF,IAArFC,UAAqF,MAArFA,SAAqF,CAA1EC,YAA0E,MAA1EA,YAA0E,CAA5DC,SAA4D,MAA5DA,SAA4D,CAAjDC,YAAiD,MAAjDA,YAAiD,CAAnCC,YAAmC,MAAnCA,YAAmC,CAArBC,eAAqB,MAArBA,eAAqB,CAKpG,GAAMC,UAAS,6FAAG,iBAAOC,KAAP,oHAChBA,KAAK,CAACC,cAAN,GACAC,KAAK,WAAIX,OAAJ,iBAA2B,CAC9BY,MAAM,CAAE,MADsB,CAE9BC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFqB,CAK9BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,IAAI,CAAE,CACJC,QAAQ,CAAEd,SADN,CAEJe,QAAQ,CAAEd,YAFN,CADa,CAAf,CALwB,CAA3B,CAAL,CAYGe,IAZH,CAYQ,SAACC,QAAD,QAAcA,SAAQ,CAACC,IAAT,EAAd,EAZR,EAaGF,IAbH,CAaQ,SAACG,MAAD,CAAY,CAChBC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAqCH,MAAM,CAACI,IAAP,CAAYC,KAAjD,EACAzB,YAAY,CAACsB,YAAY,CAACI,OAAb,CAAqB,OAArB,CAAD,CAAZ,CACD,CAhBH,EAiBGC,KAjBH,CAiBSC,OAAO,CAACC,KAjBjB,EAFgB,sDAAH,kBAATxB,UAAS,6CAAf,CAsBA,mBACE,cAAM,SAAS,CAAC,YAAhB,wBACE,WAAI,SAAS,CAAC,kBAAd,kGADF,CAMGN,SAAS,cAAG,YAAI,SAAS,CAAC,gBAAd,6CAA+DE,SAA/D,GAAH,cACV,YAAK,SAAS,CAAC,aAAf,uBACE,cAAM,SAAS,CAAC,YAAhB,CAA6B,QAAQ,CAAEI,SAAvC,wBACE,mCADF,cAEE,aAFF,cAGE,cACE,IAAI,CAAC,MADP,CAEE,QAAQ,KAFV,CAGE,QAAQ,CAAE,kBAACC,KAAD,QAAWH,aAAY,CAACG,KAAK,CAACwB,MAAN,CAAaC,KAAd,CAAvB,EAHZ,EAHF,cAQE,aARF,cASE,mCATF,cAUE,aAVF,cAWE,cACE,IAAI,CAAC,UADP,CAEE,QAAQ,KAFV,CAGE,QAAQ,CAAE,kBAACzB,KAAD,QAAWF,gBAAe,CAACE,KAAK,CAACwB,MAAN,CAAaC,KAAd,CAA1B,EAHZ,EAXF,cAgBE,aAhBF,cAiBE,eAAQ,IAAI,CAAC,QAAb,oBAjBF,GADF,EAPF,GADF,CAiCD,CA5DD,CA8DA,cAAejC,MAAf"},"metadata":{},"sourceType":"module"}